# ==============================================================================
# Real Staging AI - Environment Configuration Examples
# ==============================================================================
# This file contains example environment variable configurations for both
# API and Worker services in production deployment on Render.
#
# INSTRUCTIONS:
# 1. Copy values from Render dashboard and your service providers
# 2. DO NOT commit this file with real secrets to version control
# 3. In Render: Set these in Dashboard → Service → Environment
# ==============================================================================

# ==============================================================================
# API SERVICE ENVIRONMENT VARIABLES
# ==============================================================================

# ------------------------------------------------------------------------------
# Application
# ------------------------------------------------------------------------------
APP_ENV=production
PORT=8080

# ------------------------------------------------------------------------------
# Database (PostgreSQL)
# ------------------------------------------------------------------------------
# Option 1: Use DATABASE_URL (recommended for Render)
DATABASE_URL=postgresql://realstaging_db_user:PASSWORD@dpg-xxxxx.oregon-postgres.render.com/realstaging_db

# Option 2: Use individual PG* variables (if DATABASE_URL not set)
# PGHOST=dpg-xxxxx.oregon-postgres.render.com
# PGPORT=5432
# PGUSER=realstaging_db_user
# PGPASSWORD=PASSWORD
# PGDATABASE=realstaging_db
# PGSSLMODE=require

# ------------------------------------------------------------------------------
# Auth0 (Authentication)
# ------------------------------------------------------------------------------
AUTH0_DOMAIN=real-staging-ai.us.auth0.com
AUTH0_AUDIENCE=https://api.real-staging.ai

# ------------------------------------------------------------------------------
# Redis (Job Queue & SSE)
# ------------------------------------------------------------------------------
# Render format: redis://red-xxxxx:6379
REDIS_ADDR=redis://red-d3q4ufm3jp1c738cb2e0:6379

# Optional: Custom queue name (default: "default")
# JOB_QUEUE_NAME=default

# ------------------------------------------------------------------------------
# Stripe (Payment Processing)
# ------------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Stripe Price IDs (must match plans table)
STRIPE_PRICE_FREE=price_1SK67rLpUWppqPSl2XfvuIlh
STRIPE_PRICE_PRO=price_1SJmy5LpUWppqPSlNElnvowM
STRIPE_PRICE_BUSINESS=price_1SJmyqLpUWppqPSlGhxfz2oQ

# Optional: For documentation only
# STRIPE_PUBLISHABLE_KEY=pk_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ------------------------------------------------------------------------------
# Backblaze B2 Storage (S3-Compatible)
# ------------------------------------------------------------------------------
S3_ENDPOINT=https://s3.us-west-004.backblazeb2.com
S3_REGION=us-west-004
S3_BUCKET=realstaging-prod
# Alternative: S3_BUCKET_NAME=realstaging-prod (both work)
S3_ACCESS_KEY=0044f855527d66d0000000001
S3_SECRET_KEY=K004QYcRMz8YQ5CRhttIcKh02raeDZs
S3_USE_PATH_STYLE=false

# ------------------------------------------------------------------------------
# Replicate AI (Image Processing)
# ------------------------------------------------------------------------------
REPLICATE_API_TOKEN=r8_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ------------------------------------------------------------------------------
# Frontend
# ------------------------------------------------------------------------------
FRONTEND_URL=https://app.real-staging.ai

# ------------------------------------------------------------------------------
# Observability (Optional)
# ------------------------------------------------------------------------------
# LOG_LEVEL=info
# OTEL_EXPORTER_OTLP_ENDPOINT=http://otel:4318

# ------------------------------------------------------------------------------
# Feature Flags (Optional)
# ------------------------------------------------------------------------------
# RECONCILE_ENABLED=1


# ==============================================================================
# WORKER SERVICE ENVIRONMENT VARIABLES
# ==============================================================================
# Note: Many variables are the same as API service

# ------------------------------------------------------------------------------
# Application
# ------------------------------------------------------------------------------
# APP_ENV=production (same as API)

# ------------------------------------------------------------------------------
# Database (PostgreSQL)
# ------------------------------------------------------------------------------
# DATABASE_URL=postgresql://... (same as API)
# Or use PG* variables (same as API)

# ------------------------------------------------------------------------------
# Redis (Job Queue & Event Publishing)
# ------------------------------------------------------------------------------
# REDIS_ADDR=redis://red-xxxxx:6379 (same as API)

# Optional: Queue name (must match API's queue name)
# JOB_QUEUE_NAME=default

# Optional: Number of concurrent workers (default: 5)
# WORKER_CONCURRENCY=5

# ------------------------------------------------------------------------------
# Replicate AI (REQUIRED for image processing)
# ------------------------------------------------------------------------------
# REPLICATE_API_TOKEN=r8_xxxxx (same as API)

# ------------------------------------------------------------------------------
# Backblaze B2 Storage (same as API)
# ------------------------------------------------------------------------------
# S3_ENDPOINT=https://s3.us-west-004.backblazeb2.com (same as API)
# S3_REGION=us-west-004 (same as API)
# S3_BUCKET=realstaging-prod (same as API)
# S3_ACCESS_KEY=0044f... (same as API)
# S3_SECRET_KEY=K004Q... (same as API)
# S3_USE_PATH_STYLE=false (same as API)

# ------------------------------------------------------------------------------
# Observability (Optional)
# ------------------------------------------------------------------------------
# LOG_LEVEL=info
# OTEL_EXPORTER_OTLP_ENDPOINT=http://otel:4318


# ==============================================================================
# QUICK REFERENCE: What Each Service Needs
# ==============================================================================
#
# API SERVICE (realstaging-api):
#   APP_ENV, PORT
#   DATABASE_URL (or PG* variables)
#   AUTH0_DOMAIN, AUTH0_AUDIENCE
#   REDIS_ADDR
#   STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET
#   S3_* variables (6 total)
#   REPLICATE_API_TOKEN
#   FRONTEND_URL
#
# WORKER SERVICE (realstaging-worker):
#   APP_ENV
#   DATABASE_URL (or PG* variables)
#   REDIS_ADDR
#   REPLICATE_API_TOKEN (CRITICAL!)
#   S3_* variables (6 total)
#   WORKER_CONCURRENCY (optional, default: 5)
#
# ==============================================================================
# RENDER-SPECIFIC NOTES
# ==============================================================================
#
# 1. DATABASE_URL and REDIS_ADDR are auto-populated by Render when you:
#    - Link database: fromDatabase.name + property: connectionString
#    - Link Redis: fromService.name + type: redis + property: connectionString
#
# 2. Set secrets in Render Dashboard → Service → Environment:
#    - Click "Add Environment Variable"
#    - Mark as "Secret" to hide value in UI
#
# 3. Use render.yaml for non-secret values (S3_ENDPOINT, S3_REGION, etc.)
#
# 4. Both API and Worker need the same:
#    - DATABASE_URL
#    - REDIS_ADDR  
#    - S3_* credentials
#    - REPLICATE_API_TOKEN
#
# ==============================================================================
# TESTING LOCALLY
# ==============================================================================
#
# For local development, use these instead:
#
# APP_ENV=dev
# DATABASE_URL=postgres://postgres:postgres@postgres:5432/realstaging?sslmode=disable
# REDIS_ADDR=redis:6379
# S3_ENDPOINT=http://minio:9000
# S3_REGION=us-west-1
# S3_BUCKET=real-staging
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin
# S3_USE_PATH_STYLE=true
# AUTH0_DOMAIN=dev-xxxxx.us.auth0.com
# AUTH0_AUDIENCE=https://api.realstaging.local
# FRONTEND_URL=http://localhost:3000
# STRIPE_SECRET_KEY=sk_test_xxxxx (use test key)
# REPLICATE_API_TOKEN=r8_xxxxx (can use same token)
#
# ==============================================================================